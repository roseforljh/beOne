import{u as e,C as t,A as a,j as s,T as r}from"./index-uVwVOvxz.js";import{r as i,u as l}from"./react-vendor-D3OtlHN5.js";import{m as n}from"./utils-vendor-C4paqCkD.js";function c(){const[c,o]=i.useState(""),[u,d]=i.useState(""),[m,x]=i.useState(""),[p,j]=i.useState(!1),[f,b]=i.useState(""),{login:h,guestLogin:v}=e(),g=l(),y=t.isNativePlatform(),N=i.useRef(null),w=i.useRef(null),S=i.useRef(null),C=i.useRef(""),[k,z]=i.useState(!1),[I,R]=i.useState(!1),[A,E]=i.useState(!1);i.useEffect(()=>{if(y){const e=localStorage.getItem("apiUrl");x(e||a.API_URL)}},[y]);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-taiji-white via-taiji-gray-100 to-taiji-gray-200 flex items-center justify-center p-4",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-5 pointer-events-none",children:[s.jsx(r,{size:800,animate:!0,className:"absolute -top-40 -left-40"}),s.jsx(r,{size:600,animate:!0,className:"absolute -bottom-20 -right-20"})]}),s.jsx(n.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative w-full max-w-md",children:s.jsxs("div",{className:"bg-taiji-white rounded-3xl shadow-2xl p-8 border-2 border-taiji-gray-200",children:[s.jsxs("div",{className:"flex flex-col items-center mb-8",children:[s.jsx(r,{size:100,animate:!1}),s.jsx("h1",{className:"text-3xl font-bold text-taiji-black mt-4",children:"å¤ªæ"}),s.jsx("p",{className:"text-taiji-gray-500 mt-2",children:"æ–‡ä»¶ä¼ è¾“ç³»ç»Ÿ"})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),b(""),j(!0);let t=N.current?.value||"";const a=w.current?.value||"",s=S.current?.value||"";if(!t&&C.current&&(t=C.current,N.current&&(N.current.value=t)),y){if(!s.trim())return b("è¯·è¾“å…¥ API åœ°å€"),void j(!1);localStorage.setItem("apiUrl",s.trim())}const r=await h(t,a);r.success?g("/files"):b(r.error),j(!1)},className:"space-y-6",children:[y&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-taiji-black mb-2",children:"API åœ°å€"}),s.jsx("input",{ref:S,type:"text",defaultValue:m,onChange:e=>{const t=e.target.value;x(t)},onCompositionStart:()=>{E(!0)},onCompositionEnd:e=>{E(!1),x(e.target.value)},className:"input-field",placeholder:"ä¾‹å¦‚: http://192.168.0.100:5000",required:!0}),s.jsx("p",{className:"text-xs text-taiji-gray-400 mt-1",children:"è¯·è¾“å…¥æ‚¨çš„åç«¯æœåŠ¡å™¨åœ°å€"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-taiji-black mb-2",children:"ç”¨æˆ·å"}),s.jsx("input",{ref:N,type:"text",defaultValue:c,onChange:e=>{const t=e.target.value;o(t),C.current=t},onCompositionStart:()=>{z(!0)},onCompositionEnd:e=>{z(!1),o(e.target.value),C.current=e.target.value},onBlur:e=>{o(e.target.value),C.current=e.target.value},className:"input-field",placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-taiji-black mb-2",children:"å¯†ç "}),s.jsx("input",{ref:w,type:"password",defaultValue:u,onChange:e=>{const t=e.target.value;d(t),setTimeout(()=>{N.current&&!N.current.value&&C.current&&(N.current.value=C.current,o(C.current))},0)},onCompositionStart:()=>{R(!0)},onCompositionEnd:e=>{R(!1),d(e.target.value)},onFocus:()=>{N.current&&N.current.value!==c&&(N.current.value=c),N.current&&!N.current.value&&C.current&&(N.current.value=C.current,o(C.current))},className:"input-field",placeholder:"è¯·è¾“å…¥å¯†ç ",required:!0})]}),f&&s.jsx(n.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm",children:f}),s.jsx(n.button,{type:"submit",disabled:p,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:p?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx(r,{size:20,animate:!0}),"ç™»å½•ä¸­..."]}):"ç™»å½•"})]}),!y&&s.jsx("div",{className:"mt-4",children:s.jsx(n.button,{type:"button",disabled:p,onClick:async()=>{b(""),j(!0);const e=await v();e.success?g("/public"):b(e.error),j(!1)},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:p?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx(r,{size:20,animate:!0}),"è¿›å…¥ä¸­..."]}):"ğŸ‘¤ æ¸¸å®¢æ¨¡å¼"})}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-taiji-gray-200 space-y-2",children:[s.jsx("p",{className:"text-xs text-taiji-gray-400 text-center",children:"é»˜è®¤è´¦å·ï¼šroot / 123456"}),!y&&s.jsx("p",{className:"text-xs text-taiji-gray-400 text-center",children:"æ¸¸å®¢æ¨¡å¼ï¼šå¯ä¸‹è½½/é¢„è§ˆå…¬å…±æ–‡ä»¶ï¼Œä½¿ç”¨å¯¹è¯æ¿"})]})]})})]})}export{c as default};
